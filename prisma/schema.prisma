generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

enum Type {
  income
  outcome
}

enum AccountType { 
  carteira
  contaBancaria
  poupanca
  corretoraDeInvestimentos
}


enum GoalCategory {
  fundoDeEmergencia
  cartaoDeCredito
  economiaParaGrandesCompras
  educacaoFinanceira
}

model User {
  id           String     @id @default(uuid())
  email        String     @unique
  password        String
  userName     String
  accountList  Account[]
  goalList     Goal[]
  imageUrl   String?
}

model Account {
  id              String        @id @default(uuid())
  title           String
  value           Float         @default(0)
  description     String?
  user            User          @relation(fields: [userId], references: [id])
  userId          String
  type            AccountType   @default(poupanca)
  transactions    Transaction[]
}

model Goal {
  id             String     @id @default(uuid())
  title          String
  currentValue          Float      @default(0)
  targetValue    Float      @default(0)
  createdAt      DateTime   @default(now())
  completedAt    DateTime?
  endTime        DateTime

  user           User       @relation(fields: [userId], references: [id])
  userId         String
}

model Transaction {
  id          String                 @id @default(uuid())
  title       String
  value       Float
  type        Type
  createdAt   DateTime              @default(now())

  account     Account               @relation(fields: [accountId], references: [id])
  accountId   String

  category    Category              @relation(fields: [categoryId], references: [id])
  categoryId  String
}

model Category{
  id                String      @id @default(uuid())
  title              String      @unique
  iconId            String
  isCustom          Boolean     @default(false)

  transactionsList  Transaction[]
}